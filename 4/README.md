Solution to puzzle 4, written in Ruby